<!-- start of template -->
{{ define "submit" }}
  {{ if ne .HttpRequestedUrl "" }}
    <p> {{ .HttpRequestedUrl }} </p>
  {{ end }}
  {{ if ne .HttpServerHeader "" }}
    <p> {{ .HttpServerHeader }} </p>
  {{ end }}
  <p> {{ .Error }} </p>
{{ end }}

{{ define "dns-lookup" }}
  {{ range $ip := .DNS }}
    <ul>
     <li><p>{{ $ip }}</p></li>
    </ul>
  {{ end }}
  <p> {{ .Error }} </p>
{{ end}}

{{ define "ping" }}
  {{ range $response := .PingResponses }}
    {{ if ne $response "" }}
      <ul>
        <li><p>{{ $response }}</p></li>
      </ul>
    {{ end }}
  {{ end }}
{{ end}}

{{ define "certificates" }}
  {{ if ne .Certificates "" }}
    <pre>{{.Certificates }}</pre>
  {{ end }}
  <p> {{ .Error }} </p>
{{ end }}

{{ define "traceroute" }}
  {{ if ne .TracerouteResult "" }}
    <pre>{{.TracerouteResult }}</pre>
  {{ end }}
  <p> {{ .Error }} </p>
{{ end }}
<!-- end of template -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link href="/static/styles.css" type="text/css" rel="stylesheet">
    <link href="/static/sidebars.css"  type="text/css" rel="stylesheet">
    <link href="/static/icons/css/all.min.css" rel="stylesheet">
    <script src="/static/color-modes.js"></script>
    <script src="https://unpkg.com/htmx.org@1.9.10" integrity="sha384-D1Kt99CQMDuVetoL1lrYwg5t+9QdHe7NLX/SoJYkXDFfX37iInKRy5xLSi8nO7UC" crossorigin="anonymous"></script>
    <title>probe</title>
    <link rel="icon" href="/static/icons/favicon.svg" type="image/x-icon">
  </head>
  <body>

<!-- left sidebar -->
<main class="d-flex flex-nowrap">
    <div class="b-example-divider b-example-vr"></div>
    <div class="flex-shrink-0 p-3" style="width: 280px;">
        <div class="d-flex align-items-center justify-content-center pb-3 mb-3 text-decoration-none border-bottom custom-link-body-emphasis">
            <div class="inline-container">
                <span class="specific-icon-text">pr</span>
                <i class="specific-icon fa-solid fa-magnifying-glass"></i>
                <span class="specific-icon-text">be</span>
            </div>
        </div>
        <a href="/" class="d-flex align-items-center justify-content-center pb-3 mb-3 text-decoration-none border-bottom my-4 custom-link-body-emphasis-menu">
            &#8962;
        </a>
        <a href="/" class="d-flex align-items-center justify-content-center pb-3 mb-3 text-decoration-none border-bottom custom-link-body-emphasis-menu"
          hx-trigger="click"
          hx-post="/istio/"
          hx-target="#main-buttons" 
          hx-swap="innerHTML transition:true">
            istio
        </a>
        <a href="/" class="d-flex align-items-center justify-content-center pb-3 mb-3 text-decoration-none border-bottom custom-link-body-emphasis-menu"
          hx-trigger="click"
          hx-post="/kubernetes/"
          hx-target="#main-buttons" 
          hx-swap="innerHTML transition:true">
            kubernetes
        </a>
    </div>
    <div class="b-example-divider b-example-vr"></div>

<!-- color theme toggle -->
    <div class="dropdown position-fixed bottom-0 end-0 mb-3 me-3 bd-mode-toggle">
      <button class="btn btn-bd-primary py-2 dropdown-toggle d-flex align-items-center"
              id="bd-theme"
              type="button"
              aria-expanded="false"
              data-bs-toggle="dropdown"
              aria-label="Toggle theme (auto)">
        <svg class="bi my-1 theme-icon-active" width="1em" height="1em"><use href="#circle-half"></use></svg>
        <span class="visually-hidden" id="bd-theme-text">Toggle theme</span>
      </button>
      <ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="bd-theme-text">
        <li>
          <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
            <svg class="bi me-2 opacity-50 theme-icon" width="1em" height="1em"><use href="#sun-fill"></use></svg>
            Light
            <svg class="bi ms-auto d-none" width="1em" height="1em"><use href="#check2"></use></svg>
          </button>
        </li>
        <li>
          <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
            <svg class="bi me-2 opacity-50 theme-icon" width="1em" height="1em"><use href="#moon-stars-fill"></use></svg>
            Dark
            <svg class="bi ms-auto d-none" width="1em" height="1em"><use href="#check2"></use></svg>
          </button>
        </li>
        <li>
          <button type="button" class="dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
            <svg class="bi me-2 opacity-50 theme-icon" width="1em" height="1em"><use href="#circle-half"></use></svg>
            Auto
            <svg class="bi ms-auto d-none" width="1em" height="1em"><use href="#check2"></use></svg>
          </button>
        </li>
      </ul>
    </div>
<!-- main -->
    <div class="container" id="main-container">
      <div class="col-12">
        <div class="mt-4">
<!-- search input-->
            <div class="col-md-8 mb-2">
              <form hx-post="/button-submit/" hx-target="#main-display-box" hx-swap="innerHTML transition:true" hx-indicator="#spinner" class="d-flex">
                  <input type="text" name="url" id="button-submit" class="form-control" placeholder="Enter URL"/>
                  <div class="col-md-2 ms-2">
                      <button type="submit" class="btn btn-secondary custom-hover-color-change w-100">
                          Submit
                          <span class="spinner-border spinner-border-sm htmx-indicator" id="spinner" role="status" aria-hidden="true"></span>
                      </button>
                  </div>
              </form>
          </div>
<!-- center buttons-->
          <div class="row g-2 mt-2" id="main-buttons">
              <div class="col-lg-2">
                  <button type="button" class="btn btn-secondary btn-md custom-hover-color-change w-100"
                    hx-post="/button-certificates/"
                    hx-target="#main-display-box" 
                    hx-swap="innerHTML transition:true"
                    hx-indicator="#btnspinner-certificates">
                    Certificates
                    <span class="spinner-border spinner-border-sm htmx-indicator" id="btnspinner-certificates" role="status" aria-hidden="true"></span>
                  </button>
              </div>
              <div class="col-lg-2">
                  <button type="button" class="btn btn-secondary btn-md custom-hover-color-change w-100" 
                    hx-post="/button-dns/"
                    hx-target="#main-display-box" 
                    hx-swap="innerHTML transition:true"
                    hx-indicator="#btnspinner-dns">
                    DNS Lookup
                    <span class="spinner-border spinner-border-sm htmx-indicator" id="btnspinner-dns" role="status" aria-hidden="true"></span>
                  </button>
              </div>
              <div class="col-lg-2">
                  <button type="button" class="btn btn-secondary btn-md custom-hover-color-change w-100" 
                    hx-post="/button-ping/"
                    hx-target="#main-display-box" 
                    hx-swap="innerHTML transition:true"
                    hx-indicator="#btnspinner-ping">
                    Ping
                    <span class="spinner-border spinner-border-sm htmx-indicator" id="btnspinner-ping" role="status" aria-hidden="true"></span>
                  </button>
              </div>
              <div class="col-lg-2">
                  <button type="button" class="btn btn-secondary btn-md custom-hover-color-change w-100" 
                    hx-post="/button-traceroute/"
                    hx-target="#main-display-box" 
                    hx-swap="innerHTML transition:true"
                    hx-indicator="#btnspinner-traceroute">
                    Traceroute
                    <span class="spinner-border spinner-border-sm htmx-indicator" id="btnspinner-traceroute" role="status" aria-hidden="true"></span>
                  </button>
              </div>
            </div>
<!-- center display-->
          <div class="mt-5 custom-container" id="main-display-box"></div>
        </div>
      </div>
    </div>
  </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

  </body>
  
</html>